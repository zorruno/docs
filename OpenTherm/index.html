<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation (Wiki) for Tasmota. Open source firmware for ESP8266 devices with easy configuration using webUI, OTA updates, automation using timers or rules, expandability and entirely local control over MQTT, HTTP, serial or KNX."><link href=https://tasmota.github.io/docs/OpenTherm/ rel=canonical><link rel="shortcut icon" href=../_media/favicon.ico><meta name=generator content="mkdocs-1.1, mkdocs-material-5.1.6"><title>OpenTherm - Tasmota</title><link rel=stylesheet href=../assets/stylesheets/main.4b9ffd7b.min.css><link rel=stylesheet href=../assets/stylesheets/palette.b79bcd20.min.css><meta name=theme-color content=#2196f3><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Barlow:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Barlow",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../assets/css/anchor-fix.css><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-140681905-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#compatible-open-therm-adapters class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://tasmota.github.io/docs/ title=Tasmota class="md-header-nav__button md-logo" aria-label=Tasmota> <img src=../_media/logo.svg alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Tasmota </span> <span class="md-header-nav__topic md-ellipsis"> OpenTherm </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/arendst/tasmota/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../Features/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=../Integrations/ class="md-tabs__link md-tabs__link--active"> Smart Home Integrations </a> </li> <li class=md-tabs__item> <a href=../Supported-Peripherals/ class=md-tabs__link> Peripherals </a> </li> <li class=md-tabs__item> <a href=../Configuration-Procedure-for-New-Devices/ class=md-tabs__link> Supported Devices </a> </li> <li class=md-tabs__item> <a href=../FAQ/ class=md-tabs__link> Help </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://tasmota.github.io/docs/ title=Tasmota class="md-nav__button md-logo" aria-label=Tasmota> <img src=../_media/logo.svg alt=logo> </a> Tasmota </label> <div class=md-nav__source> <a href=https://github.com/arendst/tasmota/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> arendst/tasmota </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../About/ title=About class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../Getting-Started/ title="Getting Started" class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../Upgrading/ title=Upgrading class=md-nav__link> Upgrading </a> </li> <li class=md-nav__item> <a href=../MQTT/ title=MQTT class=md-nav__link> MQTT </a> </li> <li class=md-nav__item> <a href=../Commands/ title=Commands class=md-nav__link> Commands </a> </li> <li class=md-nav__item> <a href=../Templates/ title=Templates class=md-nav__link> Templates </a> </li> <li class=md-nav__item> <a href=../Components/ title=Components class=md-nav__link> Components </a> </li> <li class=md-nav__item> <a href=../Modules/ title=Modules class=md-nav__link> Modules </a> </li> <li class=md-nav__item> <a href=../Peripherals/ title=Peripherals class=md-nav__link> Peripherals </a> </li> <li class=md-nav__item> <a href=../WebUI/ title=WebUI class=md-nav__link> WebUI </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-12 type=checkbox id=nav-12> <label class=md-nav__link for=nav-12> Features <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Features data-md-level=1> <label class=md-nav__title for=nav-12> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Features/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../Buttons-and-Switches/ title="Buttons and Switches" class=md-nav__link> Buttons and Switches </a> </li> <li class=md-nav__item> <a href=../Device-Groups/ title="Device Groups" class=md-nav__link> Device Groups </a> </li> <li class=md-nav__item> <a href=../Lights/ title=Lights class=md-nav__link> Lights </a> </li> <li class=md-nav__item> <a href=../PIR-Motion-Sensors/ title="PIR Motion Sensors" class=md-nav__link> PIR Motion Sensors </a> </li> <li class=md-nav__item> <a href=../Power-Monitoring-Calibration/ title="Power Monitoring Calibration" class=md-nav__link> Power Monitoring Calibration </a> </li> <li class=md-nav__item> <a href=../PWM-dimmer-switch/ title="PWM Dimmer" class=md-nav__link> PWM Dimmer </a> </li> <li class=md-nav__item> <a href=../Rules/ title=Rules class=md-nav__link> Rules </a> </li> <li class=md-nav__item> <a href=../Blinds-and-Shutters/ title="Shutters and Blinds" class=md-nav__link> Shutters and Blinds </a> </li> <li class=md-nav__item> <a href=../Timers/ title=Timers class=md-nav__link> Timers </a> </li> <li class=md-nav__item> <a href=../TuyaMCU/ title=TuyaMCU class=md-nav__link> TuyaMCU </a> </li> <li class=md-nav__item> <a href=../Bluetooth/ title=Bluetooth class=md-nav__link> Bluetooth </a> </li> <li class=md-nav__item> <a href=../Zigbee/ title=Zigbee class=md-nav__link> Zigbee </a> </li> <li class=md-nav__item> <a href=../Tasmota-IR/ title="IR Communication" class=md-nav__link> IR Communication </a> </li> <li class=md-nav__item> <a href=../DeepSleep/ title=DeepSleep class=md-nav__link> DeepSleep </a> </li> <li class=md-nav__item> <a href=../Dynamic-Sleep/ title="Dynamic Sleep" class=md-nav__link> Dynamic Sleep </a> </li> <li class=md-nav__item> <a href=../I2CDevices/ title="I2C Devices" class=md-nav__link> I2C Devices </a> </li> <li class=md-nav__item> <a href=../Scripting-Language/ title=Scripting class=md-nav__link> Scripting </a> </li> <li class=md-nav__item> <a href=../Smart-Meter-Interface/ title="Smart Meter Interface" class=md-nav__link> Smart Meter Interface </a> </li> <li class=md-nav__item> <a href=../TasmotaSlave/ title=TasmotaSlave class=md-nav__link> TasmotaSlave </a> </li> <li class=md-nav__item> <a href=../Subscribe-%26-Unsubscribe/ title="Subscribe & Unsubscribe" class=md-nav__link> Subscribe & Unsubscribe </a> </li> <li class=md-nav__item> <a href=./ title=None class=md-nav__link> None </a> </li> <li class=md-nav__item> <a href=../TLS/ title="TLS Secured MQTT" class=md-nav__link> TLS Secured MQTT </a> </li> <li class=md-nav__item> <a href=../Tutorials/ title=Tutorials class=md-nav__link> Tutorials </a> </li> <li class=md-nav__item> <a href=../For-Developers/ title="For Developers" class=md-nav__link> For Developers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-13 type=checkbox id=nav-13 checked> <label class=md-nav__link for=nav-13> Smart Home Integrations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Smart Home Integrations" data-md-level=1> <label class=md-nav__title for=nav-13> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Smart Home Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Integrations/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../Alexa/ title=Alexa class=md-nav__link> Alexa </a> </li> <li class=md-nav__item> <a href=../AWS-IoT/ title="AWS IoT" class=md-nav__link> AWS IoT </a> </li> <li class=md-nav__item> <a href=../Domoticz/ title=Domoticz class=md-nav__link> Domoticz </a> </li> <li class=md-nav__item> <a href=../Home-Assistant/ title="Home Assistant" class=md-nav__link> Home Assistant </a> </li> <li class=md-nav__item> <a href=../Homebridge/ title=Homebridge class=md-nav__link> Homebridge </a> </li> <li class=md-nav__item> <a href=../HomeSeer/ title=HomeSeer class=md-nav__link> HomeSeer </a> </li> <li class=md-nav__item> <a href=../IP-Symcon/ title="IP Symcon" class=md-nav__link> IP Symcon </a> </li> <li class=md-nav__item> <a href=../KNX/ title=KNX class=md-nav__link> KNX </a> </li> <li class=md-nav__item> <a href=../NodeRed/ title=NodeRed class=md-nav__link> NodeRed </a> </li> <li class=md-nav__item> <a href=../nymea/ title=nymea class=md-nav__link> nymea </a> </li> <li class=md-nav__item> <a href=../Octoprint/ title=OctoPrint class=md-nav__link> OctoPrint </a> </li> <li class=md-nav__item> <a href=../openHAB/ title=openHAB class=md-nav__link> openHAB </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> OpenTherm <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=OpenTherm class="md-nav__link md-nav__link--active"> OpenTherm </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#compatible-open-therm-adapters class=md-nav__link> Compatible Open Therm Adapters </a> </li> <li class=md-nav__item> <a href=#connecting-to-the-boiler class=md-nav__link> Connecting to the Boiler </a> </li> <li class=md-nav__item> <a href=#setting-up-tasmota class=md-nav__link> Setting Up Tasmota </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#external-thermostat-wiring-and-safety class=md-nav__link> External Thermostat Wiring and Safety </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ot_flags-command class=md-nav__link> ot_flags command </a> </li> <li class=md-nav__item> <a href=#ot_tboiler-command class=md-nav__link> ot_tboiler command </a> </li> <li class=md-nav__item> <a href=#ot_twater-command class=md-nav__link> ot_twater command </a> </li> <li class=md-nav__item> <a href=#ot_save_setpoints-command class=md-nav__link> ot_save_setpoints command </a> </li> <li class=md-nav__item> <a href=#ot_ch-command class=md-nav__link> ot_ch command </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setting-hot-water-temperature class=md-nav__link> Setting Hot Water temperature </a> </li> <li class=md-nav__item> <a href=#automation-examples class=md-nav__link> Automation Examples </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../otto/ title=Otto class=md-nav__link> Otto </a> </li> <li class=md-nav__item> <a href=https://github.com/arendst/Tasmota/issues/3769 title=IOBroker class=md-nav__link> IOBroker </a> </li> <li class=md-nav__item> <a href=https://github.com/tim-hellhake/tasmota-adapter title="Mozilla WebThings Adapter" class=md-nav__link> Mozilla WebThings Adapter </a> </li> <li class=md-nav__item> <a href=https://github.com/BrettSheleski/SmartThingsPublic/tree/master/devicetypes/brettsheleski/sonoff-tasmota.src title=SmartThings class=md-nav__link> SmartThings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-14 type=checkbox id=nav-14> <label class=md-nav__link for=nav-14> Peripherals <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Peripherals data-md-level=1> <label class=md-nav__title for=nav-14> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Peripherals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Supported-Peripherals/ title="Supported Peripherals" class=md-nav__link> Supported Peripherals </a> </li> <li class=md-nav__item> <a href=../ADC/ title="Analog pin" class=md-nav__link> Analog pin </a> </li> <li class=md-nav__item> <a href=../Buzzer/ title=Buzzer class=md-nav__link> Buzzer </a> </li> <li class=md-nav__item> <a href=../Displays/ title=Displays class=md-nav__link> Displays </a> </li> <li class=md-nav__item> <a href=../ESP32/ title="ESP32 Support (Early alpha development)" class=md-nav__link> ESP32 Support (Early alpha development) </a> </li> <li class=md-nav__item> <a href=../A4988-Stepper-Motor-Controller/ title="A4988 stepper motor controller" class=md-nav__link> A4988 stepper motor controller </a> </li> <li class=md-nav__item> <a href=../AHT1x/ title="AHT1x temperature and humidity sensor" class=md-nav__link> AHT1x temperature and humidity sensor </a> </li> <li class=md-nav__item> <a href=../AM2301/ title="AM2301 temperature and humidity sensor" class=md-nav__link> AM2301 temperature and humidity sensor </a> </li> <li class=md-nav__item> <a href=../APDS-9960/ title="APDS-9960 light and gesture sensor" class=md-nav__link> APDS-9960 light and gesture sensor </a> </li> <li class=md-nav__item> <a href=../AS3935/ title="AS3935 Franklin Lightning sensor" class=md-nav__link> AS3935 Franklin Lightning sensor </a> </li> <li class=md-nav__item> <a href=../AZ-7798/ title="AZ7798 CO2 meter" class=md-nav__link> AZ7798 CO<sub>2</sub> meter </a> </li> <li class=md-nav__item> <a href=../BH1750/ title="BH1750 ambient light sensor" class=md-nav__link> BH1750 ambient light sensor </a> </li> <li class=md-nav__item> <a href=../BME280/ title="BME280 temperature, humidity and pressure sensor" class=md-nav__link> BME280 temperature, humidity and pressure sensor </a> </li> <li class=md-nav__item> <a href=../BME680/ title="BME680 temperature, humidity, pressure and gas sensor" class=md-nav__link> BME680 temperature, humidity, pressure and gas sensor </a> </li> <li class=md-nav__item> <a href=../CC2530/ title="CC2530 Zigbee module" class=md-nav__link> CC2530 Zigbee module </a> </li> <li class=md-nav__item> <a href=../Moisture-Sensor-and-Chirp%21-Sensor/ title="Chirp! moisture sensor" class=md-nav__link> Chirp! moisture sensor </a> </li> <li class=md-nav__item> <a href=../DHT11/ title="DHT11 temperature and humidity sensor" class=md-nav__link> DHT11 temperature and humidity sensor </a> </li> <li class=md-nav__item> <a href=../DS18x20/ title="DS18x20 temperature sensor" class=md-nav__link> DS18x20 temperature sensor </a> </li> <li class=md-nav__item> <a href=../DS3231/ title="DS3231 Real Time Clock" class=md-nav__link> DS3231 Real Time Clock </a> </li> <li class=md-nav__item> <a href=../HM-10/ title="HM-10 Bluetooth module" class=md-nav__link> HM-10 Bluetooth module </a> </li> <li class=md-nav__item> <a href=../HM-17/ title="HM-17 Bluetooth module" class=md-nav__link> HM-17 Bluetooth module </a> </li> <li class=md-nav__item> <a href=../HC-SR04/ title="HC-SR04 ultrasonic ranging sensor" class=md-nav__link> HC-SR04 ultrasonic ranging sensor </a> </li> <li class=md-nav__item> <a href=../Honeywell-HIH/ title="Honeywell HIH temperature and humidity sensor" class=md-nav__link> Honeywell HIH temperature and humidity sensor </a> </li> <li class=md-nav__item> <a href=../IAQ/ title="iAQ-Core indoor air quality sensor" class=md-nav__link> iAQ-Core indoor air quality sensor </a> </li> <li class=md-nav__item> <a href=../IR-Remote/ title="IR Remote" class=md-nav__link> IR Remote </a> </li> <li class=md-nav__item> <a href=../LM75AD/ title="LM75AD temperature sensor" class=md-nav__link> LM75AD temperature sensor </a> </li> <li class=md-nav__item> <a href=../MCP230xx/ title="MCP23008 / MCP23017 GPIO Expander" class=md-nav__link> MCP23008 / MCP23017 GPIO Expander </a> </li> <li class=md-nav__item> <a href=../MGC3130/ title="MGC3130 3D tracking and gesture controller" class=md-nav__link> MGC3130 3D tracking and gesture controller </a> </li> <li class=md-nav__item> <a href=../MH-Z19B/ title="MH-Z19B CO2 Sensor" class=md-nav__link> MH-Z19B CO<sub>2</sub> Sensor </a> </li> <li class=md-nav__item> <a href=../MLX90614/ title="MLX90614 infrared thermometer" class=md-nav__link> MLX90614 infrared thermometer </a> </li> <li class=md-nav__item> <a href=../MPR121/ title="MPR121 capacitive touch sensor" class=md-nav__link> MPR121 capacitive touch sensor </a> </li> <li class=md-nav__item> <a href=../MPU-6050/ title="MPU-6050 gyroscope and accelerometer" class=md-nav__link> MPU-6050 gyroscope and accelerometer </a> </li> <li class=md-nav__item> <a href=../NRF24L01/ title="NRF24L01 Bluetooth module" class=md-nav__link> NRF24L01 Bluetooth module </a> </li> <li class=md-nav__item> <a href=../P1-Smart-Meter/ title="Kaifa MA105C Energy Meter" class=md-nav__link> Kaifa MA105C Energy Meter </a> </li> <li class=md-nav__item> <a href=../PAJ7620/ title="PAJ7620U2 gesture sensor" class=md-nav__link> PAJ7620U2 gesture sensor </a> </li> <li class=md-nav__item> <a href=../PCA9685/ title="PCA9685 12-bit PWM controller" class=md-nav__link> PCA9685 12-bit PWM controller </a> </li> <li class=md-nav__item> <a href=../PN532/ title="PN532 NFC reader" class=md-nav__link> PN532 NFC reader </a> </li> <li class=md-nav__item> <a href=../PZEM-0XX/ title="PZEM-0xx power monitor" class=md-nav__link> PZEM-0xx power monitor </a> </li> <li class=md-nav__item> <a href=../RCWL-0516/ title="RCWL-0516 microwave radar motion sensor" class=md-nav__link> RCWL-0516 microwave radar motion sensor </a> </li> <li class=md-nav__item> <a href=../RDM6300/ title="RDM6300 RFID reader" class=md-nav__link> RDM6300 RFID reader </a> </li> <li class=md-nav__item> <a href=../SDS011/ title="SDS011 air quality sensor" class=md-nav__link> SDS011 air quality sensor </a> </li> <li class=md-nav__item> <a href=../SHT30/ title="SHT30 temperature sensor" class=md-nav__link> SHT30 temperature sensor </a> </li> <li class=md-nav__item> <a href=../TX2x/ title="TX20/TX23 anemometer" class=md-nav__link> TX20/TX23 anemometer </a> </li> <li class=md-nav__item> <a href=../TSL2561/ title="TSL2561 light sensor" class=md-nav__link> TSL2561 light sensor </a> </li> <li class=md-nav__item> <a href=../VEML6070/ title="VEML6070 UV light sensor" class=md-nav__link> VEML6070 UV light sensor </a> </li> <li class=md-nav__item> <a href=../VL53L0x/ title="VL53L0X laser ranging module" class=md-nav__link> VL53L0X laser ranging module </a> </li> <li class=md-nav__item> <a href=../WS2812B-RGB-Shield/ title="WS2812B RGB Shield" class=md-nav__link> WS2812B RGB Shield </a> </li> <li class=md-nav__item> <a href=../WS2812B-and-WS2813/ title="WS2812B and WS2813" class=md-nav__link> WS2812B and WS2813 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-15 type=checkbox id=nav-15> <label class=md-nav__link for=nav-15> Supported Devices <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Supported Devices" data-md-level=1> <label class=md-nav__title for=nav-15> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Supported Devices </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Configuration-Procedure-for-New-Devices/ title="Configure Unknown Device" class=md-nav__link> Configure Unknown Device </a> </li> <li class=md-nav__item> <a href="https://templates.blakadder.com/ " target='_blank""' title="All Supported Devices" class=md-nav__link> All Supported Devices </a> </li> <li class=md-nav__item> <a href=../Supported-Modules/ title="Supported Modules" class=md-nav__link> Supported Modules </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-16 type=checkbox id=nav-16> <label class=md-nav__link for=nav-16> Help <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Help data-md-level=1> <label class=md-nav__title for=nav-16> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../FAQ/ title=FAQ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../Troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../Device-Recovery/ title="Device Recovery" class=md-nav__link> Device Recovery </a> </li> <li class=md-nav__item> <a href="http://thehackbox.org/tasmota/release/ " target='_blank""' title="Discord Support" class=md-nav__link> Discord Support </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Compile-your-build/ title=Compiling class=md-nav__link> Compiling </a> </li> <li class=md-nav__item> <a href=../Contributing/ title=Contributing class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href="http://thehackbox.org/tasmota/release/ " target='_blank""' title=Download class=md-nav__link> Download </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#compatible-open-therm-adapters class=md-nav__link> Compatible Open Therm Adapters </a> </li> <li class=md-nav__item> <a href=#connecting-to-the-boiler class=md-nav__link> Connecting to the Boiler </a> </li> <li class=md-nav__item> <a href=#setting-up-tasmota class=md-nav__link> Setting Up Tasmota </a> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=#external-thermostat-wiring-and-safety class=md-nav__link> External Thermostat Wiring and Safety </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> Configuration </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ot_flags-command class=md-nav__link> ot_flags command </a> </li> <li class=md-nav__item> <a href=#ot_tboiler-command class=md-nav__link> ot_tboiler command </a> </li> <li class=md-nav__item> <a href=#ot_twater-command class=md-nav__link> ot_twater command </a> </li> <li class=md-nav__item> <a href=#ot_save_setpoints-command class=md-nav__link> ot_save_setpoints command </a> </li> <li class=md-nav__item> <a href=#ot_ch-command class=md-nav__link> ot_ch command </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setting-hot-water-temperature class=md-nav__link> Setting Hot Water temperature </a> </li> <li class=md-nav__item> <a href=#automation-examples class=md-nav__link> Automation Examples </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/tasmota/docs/blob/master/docs/OpenTherm.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>OpenTherm</h1> <div class="admonition failure"> <p class=admonition-title>This feature is not included in precompiled binaries.</p> </div> <p>To use it, you must <a href=../Compile-your-build/ >compile your build</a>. Add the following to <code>user_config_override.h</code>:</p> <div class=codehilite><pre><span></span><code><span class=cp>#ifndef USE_OPENTHERM</span>
<span class=cp>#define USE_OPENTHERM</span>
<span class=cp>#endif</span>
</code></pre></div> <hr> <p>This integration provides an implementation of the OpenTherm protocol.</p> <p>OpenTherm integration is based on OpenTherm protocol specification v2.2 and works with all OpenTherm compatible boilers.</p> <p>OpenTherm protocol requires a simple low voltage two-wire connection to the boiler, but voltage levels (7..15V) still much higher than ESP8266 levels, which requires OpenTherm Adapter.</p> <h2 id=compatible-open-therm-adapters>Compatible Open Therm Adapters<a class=headerlink href=#compatible-open-therm-adapters title="Permanent link">~</a></h2> <ul> <li><a href=http://ihormelnyk.com/opentherm_adapter>Ihor Melnyk OpenTherm Adapter</a></li> <li><a href=https://www.tindie.com/products/jiripraus/opentherm-gateway-arduino-shield/ >OpenTherm Gateway Arduino shield</a></li> </ul> <p>Both adapters have a fully isolated circuit from the boiler. However, please be aware that you can damage your boiler. You may also void your boiler warranty by installing this hardware. Please consult with your boiler manufacturer.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>For my home automation project, I used <a href=https://www.tindie.com/products/jiripraus/opentherm-gateway-arduino-shield/ >OpenTherm Gateway Arduino shield</a>; however, this project uses <a href=https://github.com/ihormelnyk/opentherm_library>OpenTherm</a> library from <a href=http://ihormelnyk.com/ >Ihor Melnyk</a>. I assume both adapters will work.</p> </div> <p>Please note, this integration does not work with the <a href=http://otgw.tclcode.com/index.html#intro>OTGW</a>. You might want to take a look at the <a href=https://www.home-assistant.io/integrations/opentherm_gw/ >HA OpenTherm GW</a></p> <h2 id=connecting-to-the-boiler>Connecting to the Boiler<a class=headerlink href=#connecting-to-the-boiler title="Permanent link">~</a></h2> <p>Current integration acts as a master to the boiler.</p> <p><img src=../_media/opentherm/opentherm_master.png width=375></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If OpenTherm <code>master</code> device is present, the boiler may disable it's front panel controls. Users may not be able to set a boiler and hot water temperature through the boiler. Now it's the responsibility of the <code>master</code> device. This behavior might vary across different boilers.</p> </div> <p>You may disable this behavior by removing <a href=https://github.com/arendst/Tasmota/blob/development/tasmota/xsns_69_opentherm_protocol.ino#L58-L67>OpenTherm Slave Status</a> command. However, the integration will not be able to read flame/heating/failure flags.</p> <p><a href=https://www.tindie.com/products/jiripraus/opentherm-gateway-arduino-shield/ >OpenTherm Gateway Arduino shield</a> support a gateway mode. As of now, this mode does <em>not supported</em> by the integration.</p> <p><img src=../_media/opentherm/opentherm_gw.png width=375></p> <div class="admonition failure"> <p class=admonition-title>As of now, gateway mode is not supported</p> </div> <h2 id=setting-up-tasmota>Setting Up Tasmota<a class=headerlink href=#setting-up-tasmota title="Permanent link">~</a></h2> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You need to define <code>USE_OPENTHERM</code> and rebuild Tasmota to enable OpenTherm integration.</p> </div> <ul> <li>Log into your Tasmota device</li> <li>Go to <code>Configuration</code> -&gt; <code>Configure Module</code></li> <li>Select <code>Generic</code> module type, save &amp; restart</li> <li>In the <code>Module parameters</code> window, assign <code>OpenTherm RX</code> and <code>OpenTherm TX</code> to the corresponding pins</li> <li>Save settings and restart</li> </ul> <p><img src=../_media/opentherm/configure.png width=375></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The integration attaches ISR to the <code>RX</code> GPIO to avoid pooling. That GPIO should support interrupts. Please consider this while working on the schematics.</p> </div> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">~</a></h2> <p>In order to troubleshoot you may need to enable <code>Debug</code> or <code>More Debug</code> logging level,</p> <p><img src=../_media/opentherm/logging.png width=375></p> <p>After restart you might see the following in the logs:</p> <div class=codehilite><pre><span></span><code><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>Loaded</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>flash</span><span class=w> </span><span class=k>at</span><span class=w> </span><span class=mi>3</span><span class=n>F7</span><span class=p>,</span><span class=w> </span><span class=nf>Count</span><span class=w> </span><span class=mi>72</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=nl>QPC</span><span class=p>:</span><span class=w> </span><span class=n>Flag</span><span class=w> </span><span class=mi>0</span><span class=n>E</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=nl>CFG</span><span class=p>:</span><span class=w> </span><span class=n>CR</span><span class=w> </span><span class=mi>338</span><span class=o>/</span><span class=mi>699</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=nl>SRC</span><span class=p>:</span><span class=w> </span><span class=n>Restart</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=n>Project</span><span class=w> </span><span class=n>tasmota</span><span class=w> </span><span class=n>Tasmota</span><span class=w> </span><span class=n>Version</span><span class=w> </span><span class=mf>8.2.0</span><span class=p>(</span><span class=n>sensors</span><span class=p>)</span><span class=o>-</span><span class=n>STAGE</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>01</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>perform</span><span class=w> </span><span class=n>handshake</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>01</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>SUCCESS</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0x4003011B</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>01</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>getLastResponseStatus</span><span class=w> </span><span class=n>SUCCESS</span><span class=p>.</span><span class=w> </span><span class=n>Slave</span><span class=w> </span><span class=nl>Cfg</span><span class=p>:</span><span class=w> </span><span class=mi>4003011</span><span class=n>B</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>01</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>SUCCESS</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0xC0000000</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>02</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Setting</span><span class=w> </span><span class=n>Boiler</span><span class=w> </span><span class=n>Temp</span><span class=p>.</span><span class=w> </span><span class=k>Old</span><span class=err>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>New</span><span class=err>:</span><span class=w> </span><span class=mi>85</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>02</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>SUCCESS</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0xD0015500</span><span class=w></span>
<span class=mi>00</span><span class=err>:</span><span class=mi>00</span><span class=err>:</span><span class=mi>02</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Setting</span><span class=w> </span><span class=n>Hot</span><span class=w> </span><span class=n>Water</span><span class=w> </span><span class=n>Temp</span><span class=p>.</span><span class=w> </span><span class=k>Old</span><span class=err>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>New</span><span class=err>:</span><span class=w> </span><span class=mi>37</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>34</span><span class=err>:</span><span class=mi>58</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>INVALID</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0x70730000</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>34</span><span class=err>:</span><span class=mi>58</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=n>OEMD</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=ow>not</span><span class=w> </span><span class=n>supported</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>boiler</span><span class=p>.</span><span class=w> </span><span class=k>Last</span><span class=w> </span><span class=nl>status</span><span class=p>:</span><span class=w> </span><span class=n>INVALID</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>35</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>INVALID</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0xF01B0000</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>35</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=n>TOUT</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=ow>not</span><span class=w> </span><span class=n>supported</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>boiler</span><span class=p>.</span><span class=w> </span><span class=k>Last</span><span class=w> </span><span class=nl>status</span><span class=p>:</span><span class=w> </span><span class=n>INVALID</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>35</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Processing</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=w> </span><span class=n>Status</span><span class=o>=</span><span class=n>INVALID</span><span class=p>,</span><span class=w> </span><span class=n>Response</span><span class=o>=</span><span class=mh>0x701C0000</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>35</span><span class=err>:</span><span class=mi>00</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>command</span><span class=w> </span><span class=n>TRET</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=ow>not</span><span class=w> </span><span class=n>supported</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>boiler</span><span class=p>.</span><span class=w> </span><span class=k>Last</span><span class=w> </span><span class=nl>status</span><span class=p>:</span><span class=w> </span><span class=n>INVALID</span><span class=w></span>
<span class=mi>12</span><span class=err>:</span><span class=mi>35</span><span class=err>:</span><span class=mi>16</span><span class=w> </span><span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>tele</span><span class=o>/</span><span class=n>boiler</span><span class=o>/</span><span class=n>SENSOR</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;Time&quot;</span><span class=err>:</span><span class=ss>&quot;2020-05-12T12:35:16&quot;</span><span class=p>,</span><span class=ss>&quot;ANALOG&quot;</span><span class=err>:{</span><span class=ss>&quot;A0&quot;</span><span class=err>:</span><span class=mi>7</span><span class=err>}</span><span class=p>,</span><span class=ss>&quot;OPENTHERM&quot;</span><span class=err>:{</span><span class=ss>&quot;conn&quot;</span><span class=err>:</span><span class=ss>&quot;BUSY&quot;</span><span class=p>,</span><span class=ss>&quot;settings&quot;</span><span class=err>:</span><span class=mi>3</span><span class=p>,</span><span class=ss>&quot;SLAVE&quot;</span><span class=err>:{</span><span class=ss>&quot;FAULT&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;CH&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;DHW&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;FL&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;COOL&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;CH2&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;DIAG&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;RAW&quot;</span><span class=err>:</span><span class=mi>3221225472</span><span class=err>}</span><span class=p>,</span><span class=ss>&quot;BTMP&quot;</span><span class=err>:{</span><span class=ss>&quot;FAULT&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;REQ&quot;</span><span class=err>:</span><span class=mf>85.0</span><span class=p>,</span><span class=ss>&quot;ACT&quot;</span><span class=err>:</span><span class=w> </span><span class=mf>85.0</span><span class=err>}</span><span class=p>,</span><span class=ss>&quot;HWTMP&quot;</span><span class=err>:{</span><span class=ss>&quot;REQ&quot;</span><span class=err>:</span><span class=mf>37.0</span><span class=p>,</span><span class=ss>&quot;ACT&quot;</span><span class=err>:</span><span class=w> </span><span class=mf>37.0</span><span class=err>}</span><span class=p>,</span><span class=ss>&quot;ASFF&quot;</span><span class=err>:{</span><span class=ss>&quot;FC&quot;</span><span class=err>:</span><span class=mi>0</span><span class=p>,</span><span class=ss>&quot;OFC&quot;</span><span class=err>:</span><span class=mi>0</span><span class=err>}</span><span class=p>,</span><span class=ss>&quot;FLM&quot;</span><span class=err>:</span><span class=mf>0.0</span><span class=p>,</span><span class=ss>&quot;TB&quot;</span><span class=err>:</span><span class=mf>31.0</span><span class=p>,</span><span class=ss>&quot;TDHW&quot;</span><span class=err>:</span><span class=mf>30.0</span><span class=p>,</span><span class=ss>&quot;DHWS&quot;</span><span class=err>:</span><span class=mf>37.0</span><span class=p>,</span><span class=ss>&quot;TMAX&quot;</span><span class=err>:</span><span class=mf>0.0</span><span class=err>}}</span><span class=w></span>
</code></pre></div> <p>In the example, <code>perform handshake</code> was successful, and the OpenTherm integration started to fetch various OpenTherm statuses.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Your boiler may not respond to some of the OpenTherm commands. The integration made 3 attempts to execute the command. If the third attempt failed, the command marked as not supported and excluded from the rotation.</p> </div> <h2 id=external-thermostat-wiring-and-safety>External Thermostat Wiring and Safety<a class=headerlink href=#external-thermostat-wiring-and-safety title="Permanent link">~</a></h2> <p>Central heating is the last thing you want to fail in your home. You might have significant damage to your property in case of the software bug or your custom hardware or wiring failure.</p> <p>As a last resort measure, you probably want to use some sort of mechanical thermostat, which turns on your boiler if the temperature drops below the safe threshold.</p> <p><img src=../_media/opentherm/thermostat.jpg width=475></p> <p>In the worst-case scenario, your OpenTherm hardware stop communicating with the boiler. Proper boiler implementation will flag external panel error and take control back, following the external thermostat circuit state.</p> <p>The second issue can be with your thermostat logic, especially if your logic is running on some external device. To address this, OpenTherm integration is using <code>Diagnostics Indication</code> to enable central heating. That way, if your external thermostat report freezing condition, OpenTherm integration activates heating. To enable this option, set the <code>CHOD</code> flag.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Another use case for the <code>CHOD</code> flag might be an external hot water tank storage using central heating to heat the hot water in the tank.</p> </div> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">~</a></h2> <p>OpenTherm integration supports the following commands.</p> <ul> <li><code>ot_flags</code> Get/Set OpenTherm flags</li> <li><code>ot_tboiler</code> Get/Set central heating temperature</li> <li><code>ot_twater</code> Get/Set domestic hot water temperature</li> <li><code>ot_save_setpoints</code> Save central heating and domestic hot water temperatures</li> <li><code>ot_ch</code> Activate/Deactivate central heating</li> </ul> <h3 id=ot_flags-command>ot_flags command<a class=headerlink href=#ot_flags-command title="Permanent link">~</a></h3> <p>OpenTherm integration supports the following flags:</p> <ul> <li><code>CHOD</code> - Enable CH (central heating) on diagnostics flag. See <a href=#external-thermostat-wiring-and-safety>External Thermostat</a> section</li> <li><code>DHW</code> - Enable Domestic Hot Water. If you have an on-demand gas heater, it won't start heating immediately, but enable heating when water is on</li> <li><code>CH</code> - If set, activate central heating permanently, following the <code>ot_tboiler</code> setpoint value. If disabled and <code>CHOD</code> is set, it follows the <code>Diagnostics</code> flag. Otherwise, heating is controlled by the <code>ot_ch</code> status</li> <li><code>COOL</code> - Enable cooling, if supported. Refer to your boiler manual.</li> <li><code>OTC</code> - Enable external temperature compensation thermistor. Refer to your boiler manual.</li> <li><code>CH2</code> - Enable auxiliary central heating. Refer to your boiler manual.</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>During the first run, <code>ot_flags</code> is set to the <code>CHOD,DHW</code>. Hot water setpoint set to 36-degree Celsius and central heating temperature set to 85 degree celsius</p> </div> <p>To get OpenTherm flags, type <code>ot_flags</code></p> <div class=codehilite><pre><span></span><code><span class=mi>13</span><span class=o>:</span><span class=mi>49</span><span class=o>:</span><span class=mi>48</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_flags</span>
<span class=mi>13</span><span class=o>:</span><span class=mi>49</span><span class=o>:</span><span class=mi>48</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=n>CHOD</span><span class=o>,</span><span class=n>DHW</span>
</code></pre></div> <p>To set OpenTherm flags, type <code>ot_flags DHW,CH,OTC</code></p> <div class=codehilite><pre><span></span><code><span class=mi>13</span><span class=o>:</span><span class=mi>49</span><span class=o>:</span><span class=mi>48</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_flags</span> <span class=n>DHW</span><span class=o>,</span><span class=n>CH</span><span class=o>,</span><span class=n>OTC</span>
<span class=mi>13</span><span class=o>:</span><span class=mi>49</span><span class=o>:</span><span class=mi>48</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=n>DHW</span><span class=o>,</span><span class=n>CH</span><span class=o>,</span><span class=n>OTC</span>
</code></pre></div> <h3 id=ot_tboiler-command>ot_tboiler command<a class=headerlink href=#ot_tboiler-command title="Permanent link">~</a></h3> <p><code>ot_tboiler</code> set boiler (CH) desired temperature. The actual command to the boiler will be issued if your new temperature difference bigger than the <a href=https://github.com/arendst/Tasmota/blob/development/tasmota/xsns_69_opentherm_protocol.ino#L26>OPENTHERM_BOILER_SETPOINT_TOLERANCE</a> value which is 1-degree Celsius as of today.</p> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=o>:</span><span class=mi>12</span><span class=o>:</span><span class=mi>04</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_tboiler</span>
<span class=mi>14</span><span class=o>:</span><span class=mi>12</span><span class=o>:</span><span class=mi>04</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=o>{</span><span class=s2>&quot;ot_tboiler&quot;</span><span class=o>:</span><span class=mf>60.0</span><span class=o>}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=err>:</span><span class=mi>12</span><span class=err>:</span><span class=mi>55</span><span class=w> </span><span class=nl>CMD</span><span class=p>:</span><span class=w> </span><span class=n>ot_tboiler</span><span class=w> </span><span class=mi>85</span><span class=w></span>
<span class=mi>14</span><span class=err>:</span><span class=mi>12</span><span class=err>:</span><span class=mi>55</span><span class=w> </span><span class=nl>MQT</span><span class=p>:</span><span class=w> </span><span class=n>stat</span><span class=o>/</span><span class=n>boiler</span><span class=o>/</span><span class=k>RESULT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>{</span><span class=ss>&quot;ot_tboiler&quot;</span><span class=err>:</span><span class=mf>85.0</span><span class=err>}</span><span class=w></span>
<span class=mi>14</span><span class=err>:</span><span class=mi>12</span><span class=err>:</span><span class=mi>57</span><span class=w> </span><span class=o>[</span><span class=n>OTH</span><span class=o>]</span><span class=err>:</span><span class=w> </span><span class=n>Setting</span><span class=w> </span><span class=n>Boiler</span><span class=w> </span><span class=n>Temp</span><span class=p>.</span><span class=w> </span><span class=k>Old</span><span class=err>:</span><span class=w> </span><span class=mi>60</span><span class=p>,</span><span class=w> </span><span class=k>New</span><span class=err>:</span><span class=w> </span><span class=mi>85</span><span class=w></span>
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Some boilers might write setpoint temperature into the Flash memory. Having PID controlled appliance may produce a lot of small fluctuations in the setpoint value, wearing out Boiler flash memory.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><code>ot_tboiler</code> do not write the value in the Tasmota settings, reducing Flash memory writes. To store it permanently, invoke <code>ot_save_setpoints</code> command after <code>ot_tboiler</code> command</p> </div> <h3 id=ot_twater-command>ot_twater command<a class=headerlink href=#ot_twater-command title="Permanent link">~</a></h3> <p><code>ot_twater</code> set domestic hot water temperature setpoint (DHW).</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><code>ot_twater</code> do not write the value in the Tasmota settings. To store it permanently, invoke <code>ot_save_setpoints</code> command after <code>ot_twater</code> command.</p> </div> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=o>:</span><span class=mi>13</span><span class=o>:</span><span class=mi>55</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_twater</span>
<span class=mi>14</span><span class=o>:</span><span class=mi>13</span><span class=o>:</span><span class=mi>55</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=o>{</span><span class=s2>&quot;ot_twater&quot;</span><span class=o>:</span><span class=mf>38.0</span><span class=o>}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=o>:</span><span class=mi>13</span><span class=o>:</span><span class=mi>55</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_twater</span> <span class=mi>40</span>
<span class=mi>14</span><span class=o>:</span><span class=mi>13</span><span class=o>:</span><span class=mi>55</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=o>{</span><span class=s2>&quot;ot_twater&quot;</span><span class=o>:</span><span class=mf>40.0</span><span class=o>}</span>
</code></pre></div> <h3 id=ot_save_setpoints-command>ot_save_setpoints command<a class=headerlink href=#ot_save_setpoints-command title="Permanent link">~</a></h3> <p><code>ot_save_setpoints</code> store boiler and domestic hot water setpoints into the flash memory of the Tasmota.</p> <h3 id=ot_ch-command>ot_ch command<a class=headerlink href=#ot_ch-command title="Permanent link">~</a></h3> <p><code>ot_ch</code> enable or disable central heating (CH). The Boiler follows the <code>ot_tboiler</code> temperature setpoint.</p> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=o>:</span><span class=mi>14</span><span class=o>:</span><span class=mi>57</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_ch</span>
<span class=mi>14</span><span class=o>:</span><span class=mi>14</span><span class=o>:</span><span class=mi>57</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=o>{</span><span class=s2>&quot;ot_ch&quot;</span><span class=o>:</span><span class=mi>0</span><span class=o>}</span>
</code></pre></div> <div class=codehilite><pre><span></span><code><span class=mi>14</span><span class=o>:</span><span class=mi>15</span><span class=o>:</span><span class=mi>57</span> <span class=n>CMD</span><span class=o>:</span> <span class=n>ot_ch</span> <span class=mi>1</span>
<span class=mi>14</span><span class=o>:</span><span class=mi>15</span><span class=o>:</span><span class=mi>57</span> <span class=n>MQT</span><span class=o>:</span> <span class=n>stat</span><span class=sr>/boiler/</span><span class=n>RESULT</span> <span class=o>=</span> <span class=o>{</span><span class=s2>&quot;ot_ch&quot;</span><span class=o>:</span><span class=mi>1</span><span class=o>}</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p><code>ot_ch 0</code> won't turn the boiler off, if <code>CHOD</code> flag is set and external thermostat requires heat</p> </div> <h2 id=setting-hot-water-temperature>Setting Hot Water temperature<a class=headerlink href=#setting-hot-water-temperature title="Permanent link">~</a></h2> <p>One of the drawbacks, at least with my boiler, is that the boiler disables all the external knobs, so I can not set up the desired hot water temperature from the boiler itself. You might come up with the automation, setting hot water temperature by some schedule.</p> <p>Another way is to use Home Assistant with the HomeKit integration. I created <a href=https://github.com/yury-sannikov/ha-mqtt-water-heater>MQTT Hot Water Heater</a> integration to the Home Assistant, so the Water Heater is exposed to the Home Kit. You should be able to install it through <a href=https://hacs.xyz/ >HACS</a></p> <p><img src=../_media/opentherm/hw.jpeg width=275></p> <p>You can add the following configuration into the <code>configuration.yaml</code> of your Home Assistant set up.</p> <div class=codehilite><pre><span></span><code><span class=n>water_heater</span><span class=o>:</span>
  <span class=n>platform</span><span class=o>:</span> <span class=n>mqtt_water_heater</span>
  <span class=n>name</span><span class=o>:</span> <span class=s2>&quot;Water Heater&quot;</span>
  <span class=n>state_topic</span><span class=o>:</span> <span class=s2>&quot;tele/boiler/SENSOR&quot;</span>
  <span class=n>command_topic</span><span class=o>:</span> <span class=s2>&quot;cmnd/boiler/OT_TWATER&quot;</span>
  <span class=n>value_template</span><span class=o>:</span> <span class=s2>&quot;{{ value_json.OPENTHERM.DHWS }}&quot;</span>
  <span class=n>qos</span><span class=o>:</span> <span class=mi>0</span>
  <span class=n>availability_topic</span><span class=o>:</span> <span class=s2>&quot;tele/boiler/LWT&quot;</span>
  <span class=n>payload_available</span><span class=o>:</span> <span class=s2>&quot;Online&quot;</span>
  <span class=n>payload_not_available</span><span class=o>:</span> <span class=s2>&quot;Offline&quot;</span>
  <span class=n>target_temperature</span><span class=o>:</span> <span class=mi>38</span>
  <span class=n>heater_min_temperature</span><span class=o>:</span> <span class=mi>35</span>
  <span class=n>heater_max_temperature</span><span class=o>:</span> <span class=mi>50</span>
</code></pre></div> <h2 id=automation-examples>Automation Examples<a class=headerlink href=#automation-examples title="Permanent link">~</a></h2> <p>This automation example turns on then Bathroom towel heater if someone is using hot water more than 5 minutes in the evening or more than 7 minutes in the evening. Bathroom towel heater has a coolant pump relay at <code>192.168.1.xx</code> Also, it always turns on the heater on Clock#Timer3 event, working according to the schedule</p> <p>It publishes state to the <code>st/boiler/rr_dry</code> for the Home Assistant bookkeeping. Also, it set boiler temperature to the %var3% value if external heating is required during the bathroom Dry mode.</p> <p>Also, it syncs up the coolant pump state in case of the pump controller power outage.</p> <div class=codehilite><pre><span></span><code><span class=o>#</span> <span class=n>var1</span> <span class=o>-</span> <span class=n>hot</span> <span class=n>water</span> <span class=k>ON</span> <span class=k>time</span> <span class=k>to</span> <span class=n>enable</span> <span class=n>bathroom</span> <span class=n>Dry</span> <span class=k>mode</span>
<span class=o>#</span> <span class=n>var2</span> <span class=o>-</span> <span class=n>Bathroom</span> <span class=n>Dry</span> <span class=k>Mode</span> <span class=n>boiler</span> <span class=n>setpoint</span>
<span class=o>#</span> <span class=n>var3</span> <span class=o>-</span> <span class=n>Normal</span> <span class=k>Mode</span> <span class=n>boiler</span> <span class=n>setpoint</span>
<span class=o>#</span> <span class=n>var15</span> <span class=o>-</span> <span class=n>a</span> <span class=k>lock</span> <span class=k>of</span> <span class=n>the</span> <span class=n>flame</span> <span class=k>mode</span> <span class=k>to</span> <span class=n>avoid</span> <span class=n>timer</span> <span class=k>restart</span>
<span class=o>#</span> <span class=n>var16</span> <span class=o>-</span> <span class=n>sync</span> <span class=n>power4</span> <span class=k>state</span>
<span class=o>#</span> <span class=n>use</span> <span class=n>VAR3</span> <span class=k>to</span> <span class=k>set</span> <span class=n>the</span> <span class=n>actual</span> <span class=n>boiler</span> <span class=n>temperature</span> <span class=n>setpoint</span>

<span class=o>#</span> <span class=k>If</span> <span class=n>heat</span> <span class=n>demand</span> <span class=k>is</span> <span class=k>on</span> <span class=n>during</span> <span class=n>RR</span> <span class=n>Dry</span> <span class=k>Mode</span><span class=p>,</span> <span class=n>the</span> <span class=n>temperature</span> <span class=n>should</span> <span class=n>be</span> <span class=k>set</span> <span class=n>back</span> <span class=k>to</span> <span class=n>the</span> <span class=n>normal</span>

<span class=n>Rule1</span>
<span class=k>on</span> <span class=k>system</span><span class=o>#</span><span class=n>boot</span> <span class=k>do</span> <span class=n>backlog</span> <span class=n>TelePeriod</span> <span class=mi>20</span><span class=p>;</span> <span class=n>var1</span><span class=o>=</span><span class=mi>540</span><span class=p>;</span> <span class=n>var2</span><span class=o>=</span><span class=mi>60</span><span class=p>;</span> <span class=n>var3</span><span class=o>=</span><span class=mi>85</span><span class=p>;</span> <span class=n>var15</span> <span class=mi>0</span><span class=p>;</span> <span class=n>var16</span> <span class=mi>0</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>tele</span><span class=o>-</span><span class=n>OPENTHERM</span><span class=o>#</span><span class=n>SLAVE</span><span class=o>#</span><span class=n>FL</span> <span class=k>do</span> <span class=n>WebSend</span> <span class=p>[</span><span class=mi>192</span><span class=p>.</span><span class=mi>168</span><span class=p>.</span><span class=mi>1</span><span class=p>.</span><span class=n>xx</span><span class=p>]</span> <span class=n>POWER4</span> <span class=o>%</span><span class=n>var16</span><span class=o>%</span><span class=p>;</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>Clock</span><span class=o>#</span><span class=n>Timer</span><span class=o>=</span><span class=mi>1</span> <span class=k>do</span> <span class=n>var1</span><span class=o>=</span><span class=mi>300</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>Clock</span><span class=o>#</span><span class=n>Timer</span><span class=o>=</span><span class=mi>2</span> <span class=k>do</span> <span class=n>var1</span><span class=o>=</span><span class=mi>420</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>Clock</span><span class=o>#</span><span class=n>Timer</span><span class=o>=</span><span class=mi>3</span> <span class=k>do</span> <span class=n>event</span> <span class=n>dr</span><span class=o>=</span><span class=mi>1</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>var3</span><span class=o>#</span><span class=k>state</span> <span class=k>do</span> <span class=n>ot_tboiler</span> <span class=o>%</span><span class=n>value</span><span class=o>%</span> <span class=n>endon</span>

<span class=n>Rule2</span>
<span class=k>on</span> <span class=n>tele</span><span class=o>-</span><span class=n>OPENTHERM</span><span class=o>#</span><span class=n>SLAVE</span><span class=o>#</span><span class=n>DHW</span><span class=o>&gt;%</span><span class=n>var15</span><span class=o>%</span> <span class=k>do</span> <span class=n>backlog</span> <span class=n>RuleTimer1</span> <span class=o>%</span><span class=n>var1</span><span class=o>%</span><span class=p>;</span> <span class=n>var15</span> <span class=mi>1</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>tele</span><span class=o>-</span><span class=n>OPENTHERM</span><span class=o>#</span><span class=n>SLAVE</span><span class=o>#</span><span class=n>DHW</span><span class=o>=</span><span class=mi>0</span> <span class=k>do</span> <span class=n>backlog</span> <span class=n>RuleTimer1</span> <span class=mi>0</span><span class=p>;</span> <span class=n>var15</span> <span class=mi>0</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>Rules</span><span class=o>#</span><span class=n>Timer</span><span class=o>=</span><span class=mi>2</span> <span class=k>do</span> <span class=n>backlog</span> <span class=n>ot_ch</span> <span class=mi>0</span><span class=p>;</span> <span class=n>ot_tboiler</span> <span class=o>%</span><span class=n>var3</span><span class=o>%</span><span class=p>;</span> <span class=n>var16</span> <span class=mi>0</span><span class=p>;</span> <span class=n>WebSend</span> <span class=p>[</span><span class=mi>192</span><span class=p>.</span><span class=mi>168</span><span class=p>.</span><span class=mi>1</span><span class=p>.</span><span class=n>xx</span><span class=p>]</span> <span class=n>POWER4</span> <span class=k>OFF</span><span class=p>;</span> <span class=n>publish</span> <span class=n>st</span><span class=o>/</span><span class=n>boiler</span><span class=o>/</span><span class=n>rr_dry</span> <span class=mi>0</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>Rules</span><span class=o>#</span><span class=n>Timer</span><span class=o>=</span><span class=mi>1</span> <span class=k>do</span> <span class=n>event</span> <span class=n>dr</span><span class=o>=</span><span class=mi>1</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>event</span><span class=o>#</span><span class=n>dr</span> <span class=k>do</span> <span class=n>backlog</span> <span class=n>RuleTimer2</span> <span class=mi>7200</span><span class=p>;</span> <span class=n>ot_ch</span> <span class=mi>1</span><span class=p>;</span> <span class=n>ot_tboiler</span> <span class=o>%</span><span class=n>var2</span><span class=o>%</span><span class=p>;</span> <span class=n>var16</span> <span class=mi>1</span><span class=p>;</span> <span class=n>WebSend</span> <span class=p>[</span><span class=mi>192</span><span class=p>.</span><span class=mi>168</span><span class=p>.</span><span class=mi>1</span><span class=p>.</span><span class=n>xx</span><span class=p>]</span> <span class=n>POWER4</span> <span class=k>ON</span><span class=p>;</span> <span class=n>publish</span> <span class=n>st</span><span class=o>/</span><span class=n>boiler</span><span class=o>/</span><span class=n>rr_dry</span> <span class=mi>1</span> <span class=n>endon</span>

<span class=n>Rule3</span>
<span class=k>on</span> <span class=n>tele</span><span class=o>-</span><span class=n>OPENTHERM</span><span class=o>#</span><span class=n>SLAVE</span><span class=o>#</span><span class=n>DIAG</span><span class=o>=</span><span class=mi>1</span> <span class=k>do</span> <span class=n>ot_tboiler</span> <span class=o>%</span><span class=n>var3</span><span class=o>%</span><span class=p>;</span> <span class=n>endon</span>
<span class=k>on</span> <span class=n>tele</span><span class=o>-</span><span class=n>OPENTHERM</span><span class=o>#</span><span class=n>SLAVE</span><span class=o>#</span><span class=n>DIAG</span><span class=o>=</span><span class=mi>0</span> <span class=k>do</span> <span class=n>ot_tboiler</span> <span class=o>%</span><span class=n>var2</span><span class=o>%</span><span class=p>;</span> <span class=n>endon</span>
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../openHAB/ title=openHAB class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> openHAB </div> </div> </a> <a href=../otto/ title=Otto class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Otto </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://discord.gg/Ks2Kzd4 target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> <a href=https://t.me/tasmota target=_blank rel=noopener title=t.me class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"/></svg> </a> <a href=https://github.com/tasmota target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.a0c4167b.min.js></script> <script src=../assets/javascripts/bundle.fb26dd1d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>